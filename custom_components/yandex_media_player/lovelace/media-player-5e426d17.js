function t(t){var e,i,o;const n=null===(e=t.shadowRoot)||void 0===e?void 0:e.querySelector("ha-card"),r=null==n?void 0:n.querySelector("ha-integration-header"),a=null===(o=null===(i=null==r?void 0:r.shadowRoot)||void 0===i?void 0:i.querySelector(".header"))||void 0===o?void 0:o.querySelector("img");a&&(a.src="/yandex-media-player/logo.png")}function e(e){setTimeout((()=>{var i;const o=null===(i=e.shadowRoot)||void 0===i?void 0:i.querySelector("hass-tabs-subpage"),n=null==o?void 0:o.querySelector(".container");if(n&&n.children.length)for(let e=0;e<n.children.length;e++){const i=n.children.item(e);"yandex_media_player"===i.domain&&t(i)}}),500)}function i(t){t.map((t=>{if(t.addedNodes.length)for(const i of t.addedNodes.values())"HA-CONFIG-INTEGRATIONS"===i.nodeName&&e(i)}))}function o(){var t,e;const i=document.body.querySelector("home-assistant"),o=null===(t=null==i?void 0:i.shadowRoot)||void 0===t?void 0:t.querySelector("home-assistant-main");return(null===(e=null==o?void 0:o.shadowRoot)||void 0===e?void 0:e.querySelector("ha-drawer"))||null}function n(t){new MutationObserver(i).observe(t,{subtree:!0,childList:!0})}if(window){const t=o();t?n(t):null===window||void 0===window||window.setTimeout((()=>{const t=o();t?n(t):console.warn("No ha drawer found")}),500)}const r={alisa:"M12 24C5.373 24 0 18.627 0 12S5.373 0 12 0s12 5.373 12 12-5.373 12-12 12zm-5.495-8.128c.861.857 3.156 1.371 5.495 1.38 2.338-.009 4.633-.523 5.495-1.38 2.14-2.13-3.062-10.29-5.492-10.302-2.436.013-7.638 8.171-5.498 10.302z",station:"M11.877 0l.21.007c.42.026.836.13 1.237.307l.199.095 5.31 2.802h.01l.138.08.01.005c.101.056.194.123.278.2l.01.01a1.491 1.491 0 0 1 .46 1.24l-.21 14.49c0 .577-.29 1.11-.75 1.405l-.11.064-4.948 2.835a3.965 3.965 0 0 1-3.55.08l-.178-.09-5.014-2.872a1.667 1.667 0 0 1-.774-1.282l-.005-.132-.192-14.496a1.476 1.476 0 0 1 .665-1.401l.11-.065L10.207.418l.017-.01.177-.083c.185-.083.373-.15.562-.202l.052-.014a3.263 3.263 0 0 1 .45-.084c.137-.017.274-.025.411-.025zm-6.64 6.141l.174 13.095c0 .151.068.288.187.377l.064.04 4.915 2.817c.755.4 1.65.425 2.41.083l.149-.074 4.95-2.835a.45.45 0 0 0 .227-.34l.006-.076.188-13.085-5.417 2.86h-.012a2.871 2.871 0 0 1-1.206.269 2.91 2.91 0 0 1-1.189-.262l-.157-.078-5.288-2.79zm10.876-2.317c0 1.593-1.942 2.726-4.24 2.726-2.297 0-4.239-1.133-4.239-2.726 0-.268.055-.522.157-.76L5.362 4.345a.693.693 0 0 0-.026.016l-.012.007-.01.007.012-.007-.01.007-.01.007-.014.011-.001.002-.017.018a.232.232 0 0 0-.045.117l-.006.058-.003.074a.26.26 0 0 0 .083.138l.045.03 5.745 3.032c.242.129.512.197.783.199.219 0 .437-.046.657-.142l.133-.063L18.4 4.83a.255.255 0 0 0 .128-.169.514.514 0 0 0-.034-.217l-.02-.03-.032-.031-.041-.029-2.444-1.29c.102.238.156.492.156.76zm-4.24-1.514c-1.716 0-3.028.765-3.028 1.514 0 .75 1.312 1.514 3.029 1.514 1.717 0 3.028-.765 3.028-1.514 0-.75-1.312-1.514-3.028-1.514z","station-max":"M6.271 11.243l3.786 2.305v2.238L6.27 13.48v-2.238zM11.877 0l.21.007c.42.026.836.13 1.237.307l.199.095 5.31 2.802h.01l.138.08.01.005c.101.056.194.123.278.2l.01.01a1.491 1.491 0 0 1 .46 1.24l-.21 14.49c0 .577-.29 1.11-.75 1.405l-.11.064-4.948 2.835a3.965 3.965 0 0 1-3.55.08l-.178-.09-5.014-2.872a1.667 1.667 0 0 1-.774-1.282l-.005-.132-.192-14.496a1.476 1.476 0 0 1 .665-1.401l.11-.065L10.207.418l.017-.01.177-.083c.185-.083.373-.15.562-.202l.052-.014a3.263 3.263 0 0 1 .45-.084c.137-.017.274-.025.411-.025zm-6.64 6.141l.174 13.095c0 .151.068.288.187.377l.064.04 4.915 2.817c.755.4 1.65.425 2.41.083l.149-.074 4.95-2.835a.45.45 0 0 0 .227-.34l.006-.076.188-13.085-5.417 2.86h-.012a2.871 2.871 0 0 1-1.206.269 2.91 2.91 0 0 1-1.189-.262l-.157-.078-5.288-2.79zm10.876-2.317c0 1.593-1.942 2.726-4.24 2.726-2.297 0-4.239-1.133-4.239-2.726 0-.268.055-.522.157-.76L5.362 4.345a.693.693 0 0 0-.026.016l-.012.007-.01.007.012-.007-.01.007-.01.007-.014.011-.001.002-.017.018a.232.232 0 0 0-.045.117l-.006.058-.003.074a.26.26 0 0 0 .083.138l.045.03 5.745 3.032c.242.129.512.197.783.199.219 0 .437-.046.657-.142l.133-.063L18.4 4.83a.255.255 0 0 0 .128-.169.514.514 0 0 0-.034-.217l-.02-.03-.032-.031-.041-.029-2.444-1.29c.102.238.156.492.156.76zm-4.24-1.514c-1.716 0-3.028.765-3.028 1.514 0 .75 1.312 1.514 3.029 1.514 1.717 0 3.028-.765 3.028-1.514 0-.75-1.312-1.514-3.028-1.514z","station-2":"m13.258.376.199.105 5.487 3.075c.766.428 1.114.962 1.048 1.488L20 18.783c0 1.238-.318 2.042-1.524 2.72l-3.551 2.01c-1.155.65-2.247.65-3.391 0L7.02 20.946l-.501-.29c-.706-.42-1.14-1.039-1.353-1.793C5.03 18.376 5 17.986 5 17.329V4.275l.003-.11c-.038-.511.315-1.029 1.057-1.446L10.08.48C10.6.19 11.112.03 11.62.004l.05-.002h.2c.46.015.921.14 1.388.374ZM6.499 5.7 6.5 17.329l.005.356c.01.32.04.541.107.78.116.412.327.713.679.922l1.596.919 3.394 1.924c.63.359 1.125.386 1.74.083l.291-.16 3.422-1.935c.6-.337.747-.63.764-1.288l-.005-12.395-3.572 1.988c-1.153.636-2.243.636-3.384 0L6.499 5.7Zm4.324-3.932L6.681 4.113l.123.075 5.484 3.07c.677.379 1.199.379 1.887-.001l4.01-2.232.094-.055.023-.015-.008-.006-5.59-3.18c-.677-.387-1.196-.387-1.88 0Zm1.244 1.442 2.58 1.552c.473.28.47.738-.004 1.023-.473.285-1.245.285-1.714 0l-2.576-1.549c-.474-.284-.469-.742.004-1.026.474-.281 1.242-.281 1.71 0Z","station-mini":"M12.667.5v.012l.253.01C19.077.8 24 3.853 24 7.773v8.823c0 4.114-5.421 7.274-12 7.274-6.578 0-12-3.16-12-7.274V7.775C-.004 3.66 5.418.5 12 .5h.667zm10 16.097V11.14c-2.002 2.35-6.05 3.907-10.667 3.907-4.618 0-8.665-1.556-10.667-3.906v5.455c0 3.185 4.728 5.94 10.667 5.94 5.94 0 10.667-2.755 10.667-5.94V11.14v5.456zM11.84 1.834c-5.867.049-10.51 2.784-10.507 5.94 0 3.186 4.727 5.94 10.667 5.94 5.844 0 10.514-2.666 10.663-5.786l.004-.153v-.001c0-3.138-4.592-5.86-10.41-5.938l-.417-.002zm.264 3.685c1.608 0 3 .795 3 2 0 1.204-1.392 2-3 2s-3-.796-3-2c0-1.205 1.392-2 3-2zm0 1.333c-.97 0-1.667.398-1.667.667 0 .268.698.666 1.667.666.97 0 1.667-.398 1.667-.666 0-.269-.698-.667-1.667-.667z","station-mini-2":"M12 16.733v3.954c-3.483.018-6.968-.909-9-2.829V14.25c2.504 1.717 5.78 2.49 9 2.483zM12.667.5v.012l.253.01C19.077.8 24 3.853 24 7.773v8.823c0 4.114-5.421 7.274-12 7.274-6.578 0-12-3.16-12-7.274V7.775C-.004 3.66 5.418.5 12 .5h.667zm10 16.097V11.14c-2.002 2.35-6.05 3.907-10.667 3.907-4.618 0-8.665-1.556-10.667-3.906v5.455c0 3.185 4.728 5.94 10.667 5.94 5.94 0 10.667-2.755 10.667-5.94V11.14v5.456zM11.84 1.834c-5.867.049-10.51 2.784-10.507 5.94 0 3.186 4.727 5.94 10.667 5.94 5.844 0 10.514-2.666 10.663-5.786l.004-.153c0-3.14-4.592-5.861-10.41-5.94l-.417-.001zm.264 3.685c1.608 0 3 .795 3 2 0 1.204-1.392 2-3 2s-3-.796-3-2c0-1.205 1.392-2 3-2zm0 1.333c-.97 0-1.667.398-1.667.667 0 .268.698.666 1.667.666.97 0 1.667-.398 1.667-.666 0-.269-.698-.667-1.667-.667z","station-mini-2-stereo":"M14.426 0C9.295 0 5.074 2.458 5.074 5.669v1.022c.026-.013.052-.027.079-.039a1.531 1.531 0 0 1 .642-.114c.102 0 .203.001.304.004.06.002.118.004.177.009a2.594 2.594 0 0 1-.166-.886c-.002-2.454 3.609-4.593 8.194-4.634h.324c4.51.062 8.11 2.177 8.11 4.635l-.002.119c-.08 1.68-1.85 3.182-4.428 3.951-.01.094-.019.187-.026.28-.014.16-.01.32 0 .48.008.106.026.209.04.313 1.896-.517 3.464-1.403 4.428-2.524v4.262c0 1.705-1.742 3.244-4.345 4.047l-.003.038c-.036.342-.066.687-.098 1.026l-.004.043c3.215-.877 5.462-2.813 5.462-5.172v-6.87c0-3.049-3.832-5.42-8.607-5.627l-.197-.008V.015L14.426 0Zm.082 3.906c-1.25 0-2.334.62-2.334 1.556 0 .935 1.084 1.556 2.334 1.556s2.333-.62 2.333-1.556c0-.94-1.084-1.556-2.333-1.556Zm0 1.039c.753 0 1.295.31 1.295.517 0 .209-.542.517-1.295.517-.754 0-1.296-.31-1.296-.517 0-.21.542-.517 1.296-.517Zm-1.842 9.641-.01.008c-.001.002-.063.08-.018.027.024-.03.005-.01.016-.004.007.003.01-.011.012-.03ZM9.352 5.648C4.22 5.648 0 8.106 0 11.318v6.868c0 3.203 4.22 5.67 9.352 5.67 5.13 0 9.351-2.459 9.351-5.67v-6.869c0-3.05-3.831-5.42-8.606-5.627l-.198-.008v-.01l-.547-.024Zm-.125 1.039h.324c4.51.062 8.11 2.177 8.11 4.635l-.003.119c-.116 2.429-3.749 4.51-8.276 4.51-4.634 0-8.317-2.143-8.317-4.634-.002-2.454 3.608-4.593 8.193-4.635l-.03.005Zm.205 2.867c-1.25 0-2.333.621-2.333 1.556 0 .936 1.084 1.556 2.333 1.556 1.25 0 2.334-.62 2.334-1.556 0-.939-1.084-1.556-2.334-1.556Zm0 1.04c.754 0 1.296.309 1.296.516 0 .209-.542.518-1.296.518-.753 0-1.295-.31-1.295-.518 0-.209.542-.517 1.295-.517Zm8.235 3.334v4.262c0 2.479-3.679 4.635-8.317 4.635-4.635 0-8.318-2.144-8.318-4.635v-4.262c1.556 1.83 4.718 3.042 8.318 3.042 3.591 0 6.744-1.213 8.317-3.042ZM2.357 16.35v2.81c1.58 1.493 4.303 2.213 6.993 2.201v-3.074c-2.504.005-5.049-.596-6.993-1.933v-.004Z","station-lite":"M12.611 0v.012l.233.01C18.487.308 23 3.445 23 7.47v9.06C22 20.755 17.97 24 12 24S2 20.755 1 16.53V7.47C.997 3.247 5.967 0 12 0h.611zm3.761 21.764l-.109.038c-1.308.446-2.816.696-4.402.696-1.625 0-3.167-.262-4.496-.728 1.168.624 2.601 1.014 4.208 1.056l.285.003.217-.002c1.643-.03 3.109-.425 4.297-1.063zM11.515 8c-.767 0-1.29-1.593-.86-1.9.45-.281 2.845.067 2.845.57 0 .413-1.293 1.33-1.985 1.33zm9.985 2.5C19.716 12.769 16.112 14 12 14s-7.716-1.232-9.5-3.5v4.767C2.5 18.34 6.71 21 12 21s9.5-2.66 9.5-5.734V10.5zm-9.642-9C6.633 1.545 2.498 4.077 2.5 7c0 2.95 4.21 5.5 9.5 5.5 5.205 0 9.364-2.47 9.497-5.357L21.5 7c0-2.906-4.09-5.426-9.27-5.498l-.372-.002z",module:"M12.494 3c.759 0 1.38.589 1.43 1.334l.003.099V7.4l1.272-.65.352.688-.351-.688c.13-.066.27-.106.414-.118l.11-.003.108.008c.107.012.213.04.312.084l.098.048 2.87 1.61.654-.332a.6.6 0 0 1 .498-.02l.066.032 1.996 1.116a.572.572 0 0 1 .242.199l.03.05a.59.59 0 0 1 .081.28v.44a.6.6 0 0 1-.04.214l.847.475.039.024a.999.999 0 0 1 .471.756l.004.094v.784a1.446 1.446 0 0 1-.7 1.233l-.094.053-9.279 4.693v.41a1.433 1.433 0 0 1-2.56.885l-2.51 1.268-.025.016c-.445.224-.875.181-1.19-.043L.578 16.9l-.008-.006-.08-.05C.168 16.62 0 16.233 0 15.79c0-.759.486-1.587 1.138-1.917h.002l9.922-5.022V4.433c0-.792.641-1.433 1.432-1.433zm-1.432 14.974l-2.23 1.128c-.22.112-.442.47-.475.773l-.004.068 2.709-1.368v-.601zm-2.872.114l.101-.056 2.77-1.403v-6.434l-9.379 4.747-.057.034c-.221.15-.425.522-.425.812v.058c-.002.018-.007.021-.02.016l6.057 3.52c.154-.53.508-1.027.952-1.294zM12.494 4.2a.232.232 0 0 0-.232.233V18.88a.233.233 0 0 0 .465 0V4.432l-.005-.046a.233.233 0 0 0-.228-.185V4.2zM22.8 12.034l-8.872 4.49v.602l8.738-4.42a.246.246 0 0 0 .13-.172l.004-.044v-.456zm-7.1-4.193l-1.302.667h-.002l-.469.238v6.433l7.81-3.952L15.7 7.841zm-1.773-.258v.005l.198.386-.198-.39zm1.728.234l.045.024.046-.023a.096.096 0 0 1-.09-.001zm.585-1.047l-.538.959-.001.001-.047.085.001.002.047-.084v-.001l.538-.962zm.002 0l-.294.523.294-.523zm-2.54-1.858l-.104.063.068-.037.036-.026z","module-2":"M8.825.25a2.1 2.1 0 0 1 1.96.177l3.508 2.287a4 4 0 0 1 1.816 3.35V20.66a2 2 0 0 1-1.081 1.777l-2.072 1.073a.996.996 0 0 1-.024.012l-.065.033a1.11 1.11 0 0 1-.367.064 1 1 0 0 1-.522-.147l-4.545-2.785A3 3 0 0 1 6 18.13V2.166a1.1 1.1 0 0 1 .702-1.026zm1.414 1.014a1.1 1.1 0 0 0-1.027-.092l-.963.403 3.804 2.302A3 3 0 0 1 13.5 6.444V22.1l1.068-.551a1 1 0 0 0 .533-.765l.008-.124V6.065a3 3 0 0 0-1.362-2.513z",music:"M10.92 0v3.621a8.4 8.4 0 1 0 9.32 6.695l3.04-2.445-.002-.02A12 12 0 1 1 10.92 0Zm3.36.167c2.649.51 4.988 1.89 6.707 3.832l.013.032-2.032 3.227a8.442 8.442 0 0 0-2.888-2.651v7.344a4.08 4.08 0 1 1-1.8-3.384v-8.4Z",ya:"M12 0c6.626 0 12 5.372 12 12s-5.374 12-12 12C5.371 24 0 18.628 0 12S5.371 0 12 0Zm4 5h-3.422C9.131 5 7.313 6.84 7.313 9.537c0 2.151.992 3.423 2.758 4.732L7 19h2.557l3.422-5.288-1.19-.83c-1.442-1.012-2.144-1.802-2.144-3.487 0-1.491 1.015-2.502 2.946-2.502h1.052v12.094H16V5Z",play:"M8,5.14V19.14L19,12.14L8,5.14Z",pause:"M14,19H18V5H14M6,19H10V5H6V19Z","skip-prev":"M6,18V6H8V18H6M9.5,12L18,6V18L9.5,12Z","skip-next":"M16,18H18V6H16M6,18L14.5,12L6,6V18Z","volume-on":"M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z","volume-off":"M12,4L9.91,6.09L12,8.18M4.27,3L3,4.27L7.73,9H3V15H7L12,20V13.27L16.25,17.53C15.58,18.04 14.83,18.46 14,18.7V20.77C15.38,20.45 16.63,19.82 17.68,18.96L19.73,21L21,19.73L12,10.73M19,12C19,12.94 18.8,13.82 18.46,14.64L19.97,16.15C20.62,14.91 21,13.5 21,12C21,7.72 18,4.14 14,3.23V5.29C16.89,6.15 19,8.83 19,12M16.5,12C16.5,10.23 15.5,8.71 14,7.97V10.18L16.45,12.63C16.5,12.43 16.5,12.21 16.5,12Z","heart-outline":"M 8.2773438,4.0214844 C 6.9216157,4.0176052 5.5650974,4.5511054 4.546875,5.6230469 2.4451257,7.8338836 2.5061478,11.367228 4.7050781,13.693359 v 0.002 c 0.6528718,0.689311 1.4368041,1.491434 2.3535156,2.410156 v 0.002 L 7.375,16.423828 c 0.7550874,0.755088 2.808641,2.773736 3.921875,3.875 L 12,20.994141 12.703125,20.298828 c 1.115456,-1.103483 3.173889,-3.128027 3.921875,-3.875 l 0.316406,-0.318359 h 0.002 c 0.914489,-0.918504 1.698224,-1.721234 2.351563,-2.41211 2.19893,-2.326131 2.259952,-5.8594754 0.158203,-8.0703121 C 17.415911,3.4796385 14.024957,3.4901922 12,5.6445312 10.987453,4.5672887 9.6330718,4.0253636 8.2773438,4.0214844 Z m -0.00586,1.9570312 c 0.8125198,0.00237 1.625033,0.3474006 2.2714846,1.0351563 L 12,8.5644531 13.457031,7.0136719 C 14.750071,5.6380145 16.703124,5.6314119 18.003906,7 v 0.00195 c 1.366247,1.4371597 1.372957,3.6944949 -0.162109,5.3183599 -0.63466,0.671123 -1.408897,1.463505 -2.316406,2.375 l -0.314453,0.3125 C 14.61373,15.604211 13.137466,17.059053 12,18.181641 10.864545,17.061278 9.3921759,15.610926 8.7910156,15.009766 L 8.4746094,14.693359 C 7.5673227,13.784083 6.7933769,12.993 6.15625,12.320313 h 0.00195 C 4.6231372,10.696448 4.6298466,8.4391128 5.9960937,7.0019531 V 7 C 6.6458697,6.3159433 7.4589646,5.9761448 8.2714844,5.9785156 Z",heart:"M12 21c.71-.75 4.762-4.628 7.296-7.306 2.27-2.401 2.222-5.9.157-8.071-2.063-2.172-5.4-2.163-7.453.021-2.053-2.184-5.39-2.193-7.454-.021-2.064 2.17-2.11 5.67.158 8.071C7.237 16.372 11.29 20.25 12 21z","dj-mode-on":"M12,3C17.5,3 22,6.58 22,11C22,15.42 17.5,19 12,19C10.76,19 9.57,18.82 8.47,18.5C5.55,21 2,21 2,21C4.33,18.67 4.7,17.1 4.75,16.5C3.05,15.07 2,13.13 2,11C2,6.58 6.5,3 12,3Z"};async function a(t){return{path:r[t.replace(/_/g,"-")]}}async function s(){return Object.keys(r).map((t=>({name:t})))}!window.frontendVersion||+window.frontendVersion<=20211027?(window.customIconsets=window.customIconsets||{},window.customIconsets.yandex=a):(window.customIcons=window.customIcons||{},window.customIcons.yandex={getIcon:a,getIconList:s});const l=Object.getPrototypeOf(customElements.get("home-assistant-main")),{html:c,css:u}=l.prototype;var d=u`:host{display:block;transition:filter .8s ease 0s}:host .fill{background-color:var(--ymp-background-color);bottom:0;left:0;position:absolute;right:0;top:0;transition:background-color .8s ease 0s}:host .image{background-color:var(--ymp-background-color);background-image:var(--ymp-media-image);background-position:50%;background-repeat:no-repeat;background-size:cover;bottom:0;opacity:1;position:absolute;right:0;top:0;transition:width .8s ease 0s,background-image .8s ease 0s,background-color .8s ease 0s,background-size .8s ease 0s,opacity .8s linear .8s;width:var(--ymp-media-image-width)}:host .gradient{background-image:var(--ymp-media-horizontal-gradient);bottom:0;opacity:1;position:absolute;right:0;top:0;transition:width .8s ease 0s,background-image .8s ease 0s,opacity .8s linear .8s;width:var(--ymp-media-image-width)}`;function h(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p,m={exports:{}};window,p=function(){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=10)}([function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.assignDeep=e.mapValues=void 0,e.mapValues=function(t,e){var i={};for(var o in t)if(t.hasOwnProperty(o)){var n=t[o];i[o]=e(n)}return i},e.assignDeep=function t(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return i.forEach((function(i){if(i)for(var o in i)if(i.hasOwnProperty(o)){var n=i[o];Array.isArray(n)?e[o]=n.slice(0):"object"==typeof n?(e[o]||(e[o]={}),t(e[o],n)):e[o]=n}})),e}},function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=i(7),r=o(i(8)),a=i(0),s=function(){function t(e,i){this._src=e,this.opts=a.assignDeep({},t.DefaultOpts,i)}return t.use=function(t){this._pipeline=t},t.from=function(t){return new r.default(t)},Object.defineProperty(t.prototype,"result",{get:function(){return this._result},enumerable:!1,configurable:!0}),t.prototype._process=function(e,i){this.opts.quantizer,e.scaleDown(this.opts);var o=n.buildProcessOptions(this.opts,i);return t._pipeline.process(e.getImageData(),o)},t.prototype.palette=function(){return this.swatches()},t.prototype.swatches=function(){throw new Error("Method deprecated. Use `Vibrant.result.palettes[name]` instead")},t.prototype.getPalette=function(){var t=this,e=arguments[0],i="string"==typeof e?e:"default",o="string"==typeof e?arguments[1]:e,n=new this.opts.ImageClass;return n.load(this._src).then((function(e){return t._process(e,{generators:[i]})})).then((function(e){return t._result=e,e.palettes[i]})).then((function(t){return n.remove(),o&&o(void 0,t),t})).catch((function(t){return n.remove(),o&&o(t),Promise.reject(t)}))},t.prototype.getPalettes=function(){var t=this,e=arguments[0],i=arguments[1],o=Array.isArray(e)?e:["*"],n=Array.isArray(e)?i:e,r=new this.opts.ImageClass;return r.load(this._src).then((function(e){return t._process(e,{generators:o})})).then((function(e){return t._result=e,e.palettes})).then((function(t){return r.remove(),n&&n(void 0,t),t})).catch((function(t){return r.remove(),n&&n(t),Promise.reject(t)}))},t.DefaultOpts={colorCount:64,quality:5,filters:[]},t}();e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.applyFilters=e.ImageBase=void 0;var o=function(){function t(){}return t.prototype.scaleDown=function(t){var e=this.getWidth(),i=this.getHeight(),o=1;if(t.maxDimension>0){var n=Math.max(e,i);n>t.maxDimension&&(o=t.maxDimension/n)}else o=1/t.quality;o<1&&this.resize(e*o,i*o,o)},t}();e.ImageBase=o,e.applyFilters=function(t,e){if(e.length>0)for(var i=t.data,o=i.length/4,n=void 0,r=void 0,a=void 0,s=void 0,l=void 0,c=0;c<o;c++){r=i[0+(n=4*c)],a=i[n+1],s=i[n+2],l=i[n+3];for(var u=0;u<e.length;u++)if(!e[u](r,a,s,l)){i[n+3]=0;break}}return t}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Swatch=void 0;var o=i(4),n=function(){function t(t,e){this._rgb=t,this._population=e}return t.applyFilters=function(t,e){return e.length>0?t.filter((function(t){for(var i=t.r,o=t.g,n=t.b,r=0;r<e.length;r++)if(!e[r](i,o,n,255))return!1;return!0})):t},t.clone=function(e){return new t(e._rgb,e._population)},Object.defineProperty(t.prototype,"r",{get:function(){return this._rgb[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this._rgb[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this._rgb[2]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rgb",{get:function(){return this._rgb},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hsl",{get:function(){if(!this._hsl){var t=this._rgb,e=t[0],i=t[1],n=t[2];this._hsl=o.rgbToHsl(e,i,n)}return this._hsl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hex",{get:function(){if(!this._hex){var t=this._rgb,e=t[0],i=t[1],n=t[2];this._hex=o.rgbToHex(e,i,n)}return this._hex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"population",{get:function(){return this._population},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{rgb:this.rgb,population:this.population}},t.prototype.getRgb=function(){return this._rgb},t.prototype.getHsl=function(){return this.hsl},t.prototype.getPopulation=function(){return this._population},t.prototype.getHex=function(){return this.hex},t.prototype.getYiq=function(){if(!this._yiq){var t=this._rgb;this._yiq=(299*t[0]+587*t[1]+114*t[2])/1e3}return this._yiq},Object.defineProperty(t.prototype,"titleTextColor",{get:function(){return this._titleTextColor&&(this._titleTextColor=this.getYiq()<200?"#fff":"#000"),this._titleTextColor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodyTextColor",{get:function(){return this._bodyTextColor&&(this._bodyTextColor=this.getYiq()<150?"#fff":"#000"),this._bodyTextColor},enumerable:!1,configurable:!0}),t.prototype.getTitleTextColor=function(){return this.titleTextColor},t.prototype.getBodyTextColor=function(){return this.bodyTextColor},t}();e.Swatch=n},function(t,e,i){function o(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(!e)throw new RangeError("'"+t+"' is not a valid hex color");return[e[1],e[2],e[3]].map((function(t){return parseInt(t,16)}))}function n(t,e,i){return e/=255,i/=255,t=(t/=255)>.04045?Math.pow((t+.005)/1.055,2.4):t/12.92,e=e>.04045?Math.pow((e+.005)/1.055,2.4):e/12.92,i=i>.04045?Math.pow((i+.005)/1.055,2.4):i/12.92,[.4124*(t*=100)+.3576*(e*=100)+.1805*(i*=100),.2126*t+.7152*e+.0722*i,.0193*t+.1192*e+.9505*i]}function r(t,e,i){return e/=100,i/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(e=e>.008856?Math.pow(e,1/3):7.787*e+16/116)-16,500*(t-e),200*(e-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]}function a(t,e,i){var o=n(t,e,i);return r(o[0],o[1],o[2])}function s(t,e){var i=t[0],o=t[1],n=t[2],r=e[0],a=e[1],s=e[2],l=i-r,c=o-a,u=n-s,d=Math.sqrt(o*o+n*n),h=r-i,p=Math.sqrt(a*a+s*s)-d,m=Math.sqrt(l*l+c*c+u*u),f=Math.sqrt(m)>Math.sqrt(Math.abs(h))+Math.sqrt(Math.abs(p))?Math.sqrt(m*m-h*h-p*p):0;return h/=1,p/=1*(1+.045*d),f/=1*(1+.015*d),Math.sqrt(h*h+p*p+f*f)}function l(t,e){return s(a.apply(void 0,t),a.apply(void 0,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.getColorDiffStatus=e.hexDiff=e.rgbDiff=e.deltaE94=e.rgbToCIELab=e.xyzToCIELab=e.rgbToXyz=e.hslToRgb=e.rgbToHsl=e.rgbToHex=e.hexToRgb=e.DELTAE94_DIFF_STATUS=void 0,e.DELTAE94_DIFF_STATUS={NA:0,PERFECT:1,CLOSE:2,GOOD:10,SIMILAR:50},e.hexToRgb=o,e.rgbToHex=function(t,e,i){return"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1,7)},e.rgbToHsl=function(t,e,i){t/=255,e/=255,i/=255;var o=Math.max(t,e,i),n=Math.min(t,e,i),r=0,a=0,s=(o+n)/2;if(o!==n){var l=o-n;switch(a=s>.5?l/(2-o-n):l/(o+n),o){case t:r=(e-i)/l+(e<i?6:0);break;case e:r=(i-t)/l+2;break;case i:r=(t-e)/l+4}r/=6}return[r,a,s]},e.hslToRgb=function(t,e,i){var o,n,r;function a(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(0===e)o=n=r=i;else{var s=i<.5?i*(1+e):i+e-i*e,l=2*i-s;o=a(l,s,t+1/3),n=a(l,s,t),r=a(l,s,t-1/3)}return[255*o,255*n,255*r]},e.rgbToXyz=n,e.xyzToCIELab=r,e.rgbToCIELab=a,e.deltaE94=s,e.rgbDiff=l,e.hexDiff=function(t,e){return l(o(t),o(e))},e.getColorDiffStatus=function(t){return t<e.DELTAE94_DIFF_STATUS.NA?"N/A":t<=e.DELTAE94_DIFF_STATUS.PERFECT?"Perfect":t<=e.DELTAE94_DIFF_STATUS.CLOSE?"Close":t<=e.DELTAE94_DIFF_STATUS.GOOD?"Good":t<e.DELTAE94_DIFF_STATUS.SIMILAR?"Similar":"Wrong"}},function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},n=o(i(6)),r=o(i(9));n.default.DefaultOpts.ImageClass=r.default,t.exports=n.default},function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(1));n.default.DefaultOpts.quantizer="mmcq",n.default.DefaultOpts.generators=["default"],n.default.DefaultOpts.filters=["default"],e.default=n.default},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.buildProcessOptions=void 0;var o=i(0);e.buildProcessOptions=function(t,e){var i=t.colorCount,n=t.quantizer,r=t.generators,a=t.filters,s={colorCount:i},l="string"==typeof n?{name:n,options:{}}:n;return l.options=o.assignDeep({},s,l.options),o.assignDeep({},{quantizer:l,generators:r,filters:a},e)}},function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(1)),r=i(0),a=function(){function t(t,e){void 0===e&&(e={}),this._src=t,this._opts=r.assignDeep({},n.default.DefaultOpts,e)}return t.prototype.maxColorCount=function(t){return this._opts.colorCount=t,this},t.prototype.maxDimension=function(t){return this._opts.maxDimension=t,this},t.prototype.addFilter=function(t){return this._opts.filters?this._opts.filters.push(t):this._opts.filters=[t],this},t.prototype.removeFilter=function(t){if(this._opts.filters){var e=this._opts.filters.indexOf(t);e>0&&this._opts.filters.splice(e)}return this},t.prototype.clearFilters=function(){return this._opts.filters=[],this},t.prototype.quality=function(t){return this._opts.quality=t,this},t.prototype.useImageClass=function(t){return this._opts.ImageClass=t,this},t.prototype.useGenerator=function(t,e){return this._opts.generators||(this._opts.generators=[]),this._opts.generators.push(e?{name:t,options:e}:t),this},t.prototype.useQuantizer=function(t,e){return this._opts.quantizer=e?{name:t,options:e}:t,this},t.prototype.build=function(){return new n.default(this._src,this._opts)},t.prototype.getPalette=function(t){return this.build().getPalette(t)},t.prototype.getSwatches=function(t){return this.build().getPalette(t)},t}();e.default=a},function(t,e,i){var o,n=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},o(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._initCanvas=function(){var t=this.image,e=this._canvas=document.createElement("canvas"),i=e.getContext("2d");if(!i)throw new ReferenceError("Failed to create canvas context");this._context=i,e.className="@vibrant/canvas",e.style.display="none",this._width=e.width=t.width,this._height=e.height=t.height,i.drawImage(t,0,0),document.body.appendChild(e)},e.prototype.load=function(t){var e,i,o,n,r,a,s,l=this;if("string"==typeof t)e=document.createElement("img"),i=t,(s=new URL(i,location.href)).protocol===location.protocol&&s.host===location.host&&s.port===location.port||(o=window.location.href,n=i,r=new URL(o),a=new URL(n),r.protocol===a.protocol&&r.hostname===a.hostname&&r.port===a.port)||(e.crossOrigin="anonymous"),e.src=i;else{if(!(t instanceof HTMLImageElement))return Promise.reject(new Error("Cannot load buffer as an image in browser"));e=t,i=t.src}return this.image=e,new Promise((function(t,o){var n=function(){l._initCanvas(),t(l)};e.complete?n():(e.onload=n,e.onerror=function(t){return o(new Error("Fail to load image: "+i))})}))},e.prototype.clear=function(){this._context.clearRect(0,0,this._width,this._height)},e.prototype.update=function(t){this._context.putImageData(t,0,0)},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.resize=function(t,e,i){var o=this,n=o._canvas,r=o._context,a=o.image;this._width=n.width=t,this._height=n.height=e,r.scale(i,i),r.drawImage(a,0,0)},e.prototype.getPixelCount=function(){return this._width*this._height},e.prototype.getImageData=function(){return this._context.getImageData(0,0,this._width,this._height)},e.prototype.remove=function(){this._canvas&&this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas)},e}(i(2).ImageBase);e.default=r},function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},n=i(5),r=o(i(11));n.use(r.default),t.exports=n},function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(12)),r=o(i(16)),a=(new(i(17).BasicPipeline)).filter.register("default",(function(t,e,i,o){return o>=125&&!(t>250&&e>250&&i>250)})).quantizer.register("mmcq",n.default).generator.register("default",r.default);e.default=a},function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),r=o(i(13)),a=o(i(15));function s(t,e){for(var i=t.size();t.size()<e;){var o=t.pop();if(!(o&&o.count()>0))break;var n=o.split(),r=n[0],a=n[1];if(t.push(r),a&&a.count()>0&&t.push(a),t.size()===i)break;i=t.size()}}e.default=function(t,e){if(0===t.length||e.colorCount<2||e.colorCount>256)throw new Error("Wrong MMCQ parameters");var i=r.default.build(t);i.histogram.colorCount;var o=new a.default((function(t,e){return t.count()-e.count()}));o.push(i),s(o,.75*e.colorCount);var l=new a.default((function(t,e){return t.count()*t.volume()-e.count()*e.volume()}));return l.contents=o.contents,s(l,e.colorCount-l.size()),function(t){for(var e=[];t.size();){var i=t.pop(),o=i.avg();o[0],o[1],o[2],e.push(new n.Swatch(o,i.count()))}return e}(l)}},function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(14)),r=function(){function t(t,e,i,o,n,r,a){this.histogram=a,this._volume=-1,this._count=-1,this.dimension={r1:t,r2:e,g1:i,g2:o,b1:n,b2:r}}return t.build=function(e){var i=new n.default(e,{sigBits:5});return new t(i.rmin,i.rmax,i.gmin,i.gmax,i.bmin,i.bmax,i)},t.prototype.invalidate=function(){this._volume=this._count=-1,this._avg=null},t.prototype.volume=function(){if(this._volume<0){var t=this.dimension,e=t.r1,i=t.r2,o=t.g1,n=t.g2,r=t.b1,a=t.b2;this._volume=(i-e+1)*(n-o+1)*(a-r+1)}return this._volume},t.prototype.count=function(){if(this._count<0){for(var t=this.histogram,e=t.hist,i=t.getColorIndex,o=this.dimension,n=o.r1,r=o.r2,a=o.g1,s=o.g2,l=o.b1,c=o.b2,u=0,d=n;d<=r;d++)for(var h=a;h<=s;h++)for(var p=l;p<=c;p++)u+=e[i(d,h,p)];this._count=u}return this._count},t.prototype.clone=function(){var e=this.histogram,i=this.dimension;return new t(i.r1,i.r2,i.g1,i.g2,i.b1,i.b2,e)},t.prototype.avg=function(){if(!this._avg){var t=this.histogram,e=t.hist,i=t.getColorIndex,o=this.dimension,n=o.r1,r=o.r2,a=o.g1,s=o.g2,l=o.b1,c=o.b2,u=0,d=void 0,h=void 0,p=void 0;d=h=p=0;for(var m=n;m<=r;m++)for(var f=a;f<=s;f++)for(var v=l;v<=c;v++){var _=e[i(m,f,v)];u+=_,d+=_*(m+.5)*8,h+=_*(f+.5)*8,p+=_*(v+.5)*8}this._avg=u?[~~(d/u),~~(h/u),~~(p/u)]:[~~(8*(n+r+1)/2),~~(8*(a+s+1)/2),~~(8*(l+c+1)/2)]}return this._avg},t.prototype.contains=function(t){var e=t[0],i=t[1],o=t[2],n=this.dimension,r=n.r1,a=n.r2,s=n.g1,l=n.g2,c=n.b1,u=n.b2;return i>>=3,o>>=3,(e>>=3)>=r&&e<=a&&i>=s&&i<=l&&o>=c&&o<=u},t.prototype.split=function(){var t=this.histogram,e=t.hist,i=t.getColorIndex,o=this.dimension,n=o.r1,r=o.r2,a=o.g1,s=o.g2,l=o.b1,c=o.b2,u=this.count();if(!u)return[];if(1===u)return[this.clone()];var d,h,p=r-n+1,m=s-a+1,f=c-l+1,v=Math.max(p,m,f),_=null;d=h=0;var g=null;if(v===p){g="r",_=new Uint32Array(r+1);for(var y=n;y<=r;y++){d=0;for(var b=a;b<=s;b++)for(var w=l;w<=c;w++)d+=e[i(y,b,w)];h+=d,_[y]=h}}else if(v===m)for(g="g",_=new Uint32Array(s+1),b=a;b<=s;b++){for(d=0,y=n;y<=r;y++)for(w=l;w<=c;w++)d+=e[i(y,b,w)];h+=d,_[b]=h}else for(g="b",_=new Uint32Array(c+1),w=l;w<=c;w++){for(d=0,y=n;y<=r;y++)for(b=a;b<=s;b++)d+=e[i(y,b,w)];h+=d,_[w]=h}for(var x=-1,C=new Uint32Array(_.length),S=0;S<_.length;S++){var k=_[S];x<0&&k>h/2&&(x=S),C[S]=h-k}var M=this;return function(t){var e=t+"1",i=t+"2",o=M.dimension[e],n=M.dimension[i],r=M.clone(),a=M.clone(),s=x-o,l=n-x;for(s<=l?(n=Math.min(n-1,~~(x+l/2)),n=Math.max(0,n)):(n=Math.max(o,~~(x-1-s/2)),n=Math.min(M.dimension[i],n));!_[n];)n++;for(var c=C[n];!c&&_[n-1];)c=C[--n];return r.dimension[i]=n,a.dimension[e]=n+1,[r,a]}(g)},t}();e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){this.pixels=t,this.opts=e;var i=e.sigBits,o=function(t,e,o){return(t<<2*i)+(e<<i)+o};this.getColorIndex=o;var n,r,a,s,l,c,u,d,h,p=8-i,m=new Uint32Array(1<<3*i);n=a=l=0,r=s=c=Number.MAX_VALUE;for(var f=t.length/4,v=0;v<f;){var _=4*v;v++,u=t[_+0],d=t[_+1],h=t[_+2],0!==t[_+3]&&(m[o(u>>=p,d>>=p,h>>=p)]+=1,u>n&&(n=u),u<r&&(r=u),d>a&&(a=d),d<s&&(s=d),h>l&&(l=h),h<c&&(c=h))}this._colorCount=m.reduce((function(t,e){return e>0?t+1:t}),0),this.hist=m,this.rmax=n,this.rmin=r,this.gmax=a,this.gmin=s,this.bmax=l,this.bmin=c}return Object.defineProperty(t.prototype,"colorCount",{get:function(){return this._colorCount},enumerable:!1,configurable:!0}),t}();e.default=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this._comparator=t,this.contents=[],this._sorted=!1}return t.prototype._sort=function(){this._sorted||(this.contents.sort(this._comparator),this._sorted=!0)},t.prototype.push=function(t){this.contents.push(t),this._sorted=!1},t.prototype.peek=function(t){return this._sort(),t="number"==typeof t?t:this.contents.length-1,this.contents[t]},t.prototype.pop=function(){return this._sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this._sort(),this.contents.map(t)},t}();e.default=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),n=i(4),r={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function a(t,e,i,o,n,r,a,s,l,c){var u=null,d=0;return e.forEach((function(e){var h=e.hsl,p=h[1],m=h[2];if(p>=s&&p<=l&&m>=n&&m<=r&&!function(t,e){return t.Vibrant===e||t.DarkVibrant===e||t.LightVibrant===e||t.Muted===e||t.DarkMuted===e||t.LightMuted===e}(t,e)){var f=function(t,e,i,o,n,r,a){function s(t,e){return 1-Math.abs(t-e)}return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=0,n=0;n<t.length;n+=2){var r=t[n],a=t[n+1];i+=r*a,o+=a}return i/o}(s(t,e),a.weightSaturation,s(i,o),a.weightLuma,n/r,a.weightPopulation)}(p,a,m,o,e.population,i,c);(null===u||f>d)&&(u=e,d=f)}})),u}e.default=function(t,e){e=Object.assign({},r,e);var i=function(t){var e=0;return t.forEach((function(t){e=Math.max(e,t.population)})),e}(t),s=function(t,e,i){var o={Vibrant:null,DarkVibrant:null,LightVibrant:null,Muted:null,DarkMuted:null,LightMuted:null};return o.Vibrant=a(o,t,e,i.targetNormalLuma,i.minNormalLuma,i.maxNormalLuma,i.targetVibrantSaturation,i.minVibrantSaturation,1,i),o.LightVibrant=a(o,t,e,i.targetLightLuma,i.minLightLuma,1,i.targetVibrantSaturation,i.minVibrantSaturation,1,i),o.DarkVibrant=a(o,t,e,i.targetDarkLuma,0,i.maxDarkLuma,i.targetVibrantSaturation,i.minVibrantSaturation,1,i),o.Muted=a(o,t,e,i.targetNormalLuma,i.minNormalLuma,i.maxNormalLuma,i.targetMutesSaturation,0,i.maxMutesSaturation,i),o.LightMuted=a(o,t,e,i.targetLightLuma,i.minLightLuma,1,i.targetMutesSaturation,0,i.maxMutesSaturation,i),o.DarkMuted=a(o,t,e,i.targetDarkLuma,0,i.maxDarkLuma,i.targetMutesSaturation,0,i.maxMutesSaturation,i),o}(t,i,e);return function(t,e,i){if(!t.Vibrant&&!t.DarkVibrant&&!t.LightVibrant){if(!t.DarkVibrant&&t.DarkMuted){var r=t.DarkMuted.hsl,a=r[0],s=r[1],l=r[2];l=i.targetDarkLuma,t.DarkVibrant=new o.Swatch(n.hslToRgb(a,s,l),0)}if(!t.LightVibrant&&t.LightMuted){var c=t.LightMuted.hsl;a=c[0],s=c[1],l=c[2],l=i.targetDarkLuma,t.DarkVibrant=new o.Swatch(n.hslToRgb(a,s,l),0)}}if(!t.Vibrant&&t.DarkVibrant){var u=t.DarkVibrant.hsl;a=u[0],s=u[1],l=u[2],l=i.targetNormalLuma,t.Vibrant=new o.Swatch(n.hslToRgb(a,s,l),0)}else if(!t.Vibrant&&t.LightVibrant){var d=t.LightVibrant.hsl;a=d[0],s=d[1],l=d[2],l=i.targetNormalLuma,t.Vibrant=new o.Swatch(n.hslToRgb(a,s,l),0)}if(!t.DarkVibrant&&t.Vibrant){var h=t.Vibrant.hsl;a=h[0],s=h[1],l=h[2],l=i.targetDarkLuma,t.DarkVibrant=new o.Swatch(n.hslToRgb(a,s,l),0)}if(!t.LightVibrant&&t.Vibrant){var p=t.Vibrant.hsl;a=p[0],s=p[1],l=p[2],l=i.targetLightLuma,t.LightVibrant=new o.Swatch(n.hslToRgb(a,s,l),0)}if(!t.Muted&&t.Vibrant){var m=t.Vibrant.hsl;a=m[0],s=m[1],l=m[2],l=i.targetMutesSaturation,t.Muted=new o.Swatch(n.hslToRgb(a,s,l),0)}if(!t.DarkMuted&&t.DarkVibrant){var f=t.DarkVibrant.hsl;a=f[0],s=f[1],l=f[2],l=i.targetMutesSaturation,t.DarkMuted=new o.Swatch(n.hslToRgb(a,s,l),0)}if(!t.LightMuted&&t.LightVibrant){var v=t.LightVibrant.hsl;a=v[0],s=v[1],l=v[2],l=i.targetMutesSaturation,t.LightMuted=new o.Swatch(n.hslToRgb(a,s,l),0)}}(s,0,e),s}},function(t,e,i){var o=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))((function(n,r){function a(t){try{l(o.next(t))}catch(t){r(t)}}function s(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((o=o.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,o,n,r,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){a.label=r[1];break}if(6===r[0]&&a.label<n[1]){a.label=n[1],n=r;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(r);break}n[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{i=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.BasicPipeline=e.Stage=void 0;var r=i(2),a=function(){function t(t){this.pipeline=t,this._map={}}return t.prototype.names=function(){return Object.keys(this._map)},t.prototype.has=function(t){return!!this._map[t]},t.prototype.get=function(t){return this._map[t]},t.prototype.register=function(t,e){return this._map[t]=e,this.pipeline},t}();e.Stage=a;var s=function(){function t(){this.filter=new a(this),this.quantizer=new a(this),this.generator=new a(this)}return t.prototype._buildProcessTasks=function(t){var e=this,i=t.filters,o=t.quantizer,n=t.generators;return 1===n.length&&"*"===n[0]&&(n=this.generator.names()),{filters:i.map((function(t){return r(e.filter,t)})),quantizer:r(this.quantizer,o),generators:n.map((function(t){return r(e.generator,t)}))};function r(t,e){var i,o;return"string"==typeof e?i=e:(i=e.name,o=e.options),{name:i,fn:t.get(i),options:o}}},t.prototype.process=function(t,e){return o(this,void 0,void 0,(function(){var i,o,r,a,s,l,c;return n(this,(function(n){switch(n.label){case 0:return i=this._buildProcessTasks(e),o=i.filters,r=i.quantizer,a=i.generators,[4,this._filterColors(o,t)];case 1:return s=n.sent(),[4,this._generateColors(r,s)];case 2:return l=n.sent(),[4,this._generatePalettes(a,l)];case 3:return c=n.sent(),[2,{colors:l,palettes:c}]}}))}))},t.prototype._filterColors=function(t,e){return Promise.resolve(r.applyFilters(e,t.map((function(t){return t.fn}))))},t.prototype._generateColors=function(t,e){return Promise.resolve(t.fn(e.data,t.options))},t.prototype._generatePalettes=function(t,e){return o(this,void 0,void 0,(function(){var i;return n(this,(function(o){switch(o.label){case 0:return[4,Promise.all(t.map((function(t){var i=t.fn,o=t.options;return Promise.resolve(i(e,o))})))];case 1:return i=o.sent(),[2,Promise.resolve(i.reduce((function(e,i,o){return e[t[o].name]=i,e}),{}))]}}))}))},t}();e.BasicPipeline=s}])};var f=h(m.exports=p());const v=(t,e,i)=>"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1,7),_=(t,e,i)=>{let o,n,r;function a(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(0===e)o=n=r=i;else{const s=i<.5?i*(1+e):i+e-i*e,l=2*i-s;o=a(l,s,t+1/3),n=a(l,s,t),r=a(l,s,t-1/3)}return[255*o,255*n,255*r]},g=(t,e,i)=>{const o=[t,e,i].map((t=>{let e=t;return e/=255,e<=.03928?e/12.92:((e+.055)/1.055)**2.4}));return.2126*o[0]+.7152*o[1]+.0722*o[2]},y=(t,e)=>Math.round(100*(((t,e)=>{const i=g(...t),o=g(...e);return(Math.max(i,o)+.05)/(Math.min(i,o)+.05)})(t,e)+Number.EPSILON))/100;f._pipeline.generator.register("default",(t=>{t.sort(((t,e)=>e.getPopulation()-t.getPopulation()));const e=t[0];let i;const o=new Map,n=(t,i)=>(o.has(t)||o.set(t,y(e.getRgb(),i)),o.get(t)>4.5);for(let e=1;e<t.length&&void 0===i;e++){if(n(t[e].getHex(),t[e].getRgb())){i=t[e].getRgb();break}const o=t[e];for(let r=e+1;r<t.length;r++){const e=t[r];if(!(Math.abs(o.getRgb()[0]-e.getRgb()[0])+Math.abs(o.getRgb()[1]-e.getRgb()[1])+Math.abs(o.getRgb()[2]-e.getRgb()[2])>150)&&n(e.getHex(),e.getRgb())){i=e.getRgb();break}}}void 0===i&&(i=e.getYiq()<200?[255,255,255]:[0,0,0]),i=new e.constructor(i,0);const[r,a,s]=e.getHsl(),l=360*r,c=l>240?l-240:l>120?l-120:l,u=.4*(Math.abs(60-c)/60)+.4;return[i.getHex(),e.getHex(),v(..._(r,a,s>u?0:1)),v(..._(r,a,s>u?.1:.9))]}));class b extends l{constructor(){super(...arguments),this._cardHeight=0,this._fallbackImage="/yandex-media-player/no-image.png"}willUpdate(t){super.willUpdate(t),this.hasUpdated||this._computeCardSize(),t.has("image")&&this._computeColors()}firstUpdated(t){this._attachObserver()}updated(t){(t.has("image")||t.has("editMode")||t.has("color")||t.has("_cardHeight")||t.has("_backgroundColor")||t.has("_foregroundColor")||t.has("_textPrimaryColor")||t.has("_textSecondaryColor")||t.has("_isNarrow"))&&this._updateCssVars()}connectedCallback(){super.connectedCallback(),this._updateCssVars(),this.updateComplete.then((()=>this._attachObserver()))}disconnectedCallback(){super.disconnectedCallback(),this._resizeObserver&&this._resizeObserver.disconnect()}render(){return c`<div class="fill"></div><div class="image"></div><div class="gradient"></div>`}_computeCardSize(){const t=this.shadowRoot.querySelector(".fill");t&&(this._cardHeight=t.offsetHeight,this._isNarrow=t.offsetWidth<400)}_updateCssVars(){var t,e,i,o,n;const r=this.parentNode;if(!r)return;const a=null!==(t=this._backgroundColor)&&void 0!==t?t:"var(--ha-card-background, var(--card-background-color, #fff))",s=this._foregroundColor?function(t,e=1){const i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(!i)return;const[,o,n,r]=i;return`rgba(${parseInt(o,16)}, ${parseInt(n,16)}, ${parseInt(r,16)}, ${e})`}(this._foregroundColor,.3):"rgba(194, 194, 194, .3)",l=null!==(e=this._foregroundColor)&&void 0!==e?e:"var(--primary-text-color)",c=null!==(i=this._textPrimaryColor)&&void 0!==i?i:"var(--primary-text-color)",u=null!==(o=this._textSecondaryColor)&&void 0!==o?o:"var(--primary-text-color)",d="accent"===this.color?"var(--accent-color)":"var(--primary-color)";r.style.setProperty("--ymp-media-image",`url(${null!==(n=this.image)&&void 0!==n?n:this._fallbackImage})`),r.style.setProperty("--ymp-media-image-width",`${this._cardHeight||0}px`),r.style.setProperty("--ymp-media-horizontal-gradient",`linear-gradient(to right, ${a}, transparent)`),r.style.setProperty("--ymp-media-vertical-gradient",`linear-gradient(to top, ${a} 0%, ${a} 15%, transparent 100%)`),r.style.setProperty("--ymp-interface-color",d),r.style.setProperty("--ymp-disabled-color","#6e6e6e"),r.style.setProperty("--ymp-background-color",`${a}`),r.style.setProperty("--ymp-background-alfa-color",`${s}`),r.style.setProperty("--ymp-foreground-color",`${l}`),r.style.setProperty("--ymp-text-primary",`${c}`),r.style.setProperty("--ymp-text-secondary",`${u}`)}async _computeColors(){if(this.image){try{const[t,e,i,o]=await(async t=>new f(t,{colorCount:16}).getPalette())(this.image);this._backgroundColor=e,this._foregroundColor=t,this._textPrimaryColor=i,this._textSecondaryColor=o}catch(t){console.error("Error getting Image Colors",t),this._backgroundColor=void 0,this._foregroundColor=void 0,this._textPrimaryColor=void 0,this._textSecondaryColor=void 0}this._updateCssVars()}}async _attachObserver(){this._resizeObserver||(this._resizeObserver=new ResizeObserver(((t,e,i=!1)=>{let o;const n=(...n)=>{const r=i&&!o;clearTimeout(o),o=window.setTimeout((()=>{o=void 0,i||t(...n)}),e),r&&t(...n)};return n.cancel=()=>{clearTimeout(o)},n})((()=>this._computeCardSize()),250,!1)));const t=this.shadowRoot.querySelector(".fill");t&&this._resizeObserver.observe(t)}}b.styles=d,b.properties={image:{attribute:!0,type:String},editMode:{attribute:!0,type:Boolean},color:{attribute:!0,type:String},_backgroundColor:{state:!0,type:String},_foregroundColor:{state:!0,type:String},_textPrimaryColor:{state:!0,type:String},_textSecondaryColor:{state:!0,type:String},_isNarrow:{state:!0,type:Boolean},_cardHeight:{state:!0,type:Number}},window.customElements.define("ymp-background",b);var w=u`:host{background-image:var(--ymp-media-vertical-gradient);display:block;height:40px;position:relative;z-index:5}:host .durations{align-items:center;color:var(--ymp-text-primary);display:flex;font-size:10px;height:20px;justify-content:space-between;left:0;opacity:1;padding:0 8px;position:absolute;right:0;top:10px;transition:opacity .2s ease-out}:host .durations .pale{opacity:.75}:host .progress-bar{bottom:0;cursor:pointer;height:4px;left:0;position:absolute;right:0;transition:height .2s ease-out 0s}:host .progress-bar .bar{background-color:var(--ymp-interface-color);height:100%;position:relative;transition:width .2s ease-out,background-color .2s ease-out;width:0;z-index:2}:host .progress-bar .bar-background{background-color:var(--ymp-background-alfa-color);bottom:0;left:0;position:absolute;right:0;top:0}:host(:hover) .progress-bar{height:10px}:host([disabled]){pointer-events:none}:host([disabled]) .durations{opacity:0}:host([disabled]) .progress-bar{height:4px}:host([disabled]) .progress-bar .bar{background-color:var(--ymp-disabled-color)}:host([disabled]) .progress-bar .bar-background{background-color:var(--ymp-disabled-color)}`;const x=t=>{if(void 0===t)return"";let e=Math.abs(parseInt(""+t%60,10)),i=Math.abs(parseInt(""+t/60%60,10)),o=Math.abs(parseInt(""+t/3600%24,10));return o=o<10?`0${o}`:o,i=i<10?`0${i}`:i,e=e<10?`0${e}`:e,`${"00"!==o?`${o}:`:""}${i}:${e}`};class C extends l{constructor(){super(...arguments),this._position=0,this._innerPosition=0,this._lock=!1}willUpdate(t){if(super.willUpdate(t),t.has("_position")){const t=[this._innerPosition,this._innerPosition-1,this._innerPosition+1];this._lock&&t.includes(this._position)?this._lock=!1:this._lock||this._position===this._innerPosition||(this._innerPosition=this._position)}}render(){return c`<div class="durations"><div class="duration">${this._positionTime()}</div><div class="duration">${this._remainedTime()} ${this._durationTime()}</div></div><div class="progress-bar" @click="${this._handleSeek}"><div class="bar" .style="${`width: ${this._barWidthPercent()}%`}"></div><div class="bar-background"></div></div>`}get position(){return this._position}set position(t){this._position=t?Math.floor(t):0}_barWidthPercent(){if(void 0!==this._innerPosition&&void 0!==this.duration)return Math.round(this._innerPosition/this.duration*1e4)/100}_positionTime(){return void 0===this._innerPosition?c``:c`<span>${x(this._innerPosition)}</span>`}_durationTime(){return void 0===this.duration?c``:c`<span>${x(this.duration)}</span>`}_remainedTime(){if(void 0===this._innerPosition||void 0===this.duration)return c``;const t=this._innerPosition-this.duration;return c`<span class="pale">-${x(t)}</span> <span class="pale"> | </span>`}_handleSeek(t){if(t.stopPropagation(),void 0===this.duration||!this.clientWidth)return;const e=t.offsetX/this.clientWidth;this._lock=!0,this._innerPosition=Math.floor(this.duration*e);const i={detail:{seek:this._innerPosition},bubbles:!0,composed:!0};this.dispatchEvent(new CustomEvent("seek",i))}}C.styles=w,C.properties={duration:{attribute:!0,type:Number},position:{attribute:"position",type:Number},disabled:{attribute:"disabled",reflect:!0,type:Boolean},_position:{state:!0,type:Number},_innerPosition:{state:!0,type:Number},_lock:{state:!0,type:Boolean}},window.customElements.define("ymp-progress",C);var S=u`:host{--paper-slider-max-width:200px;--paper-slider-height:4px;--calculated-paper-slider-height:2px;--paper-slider-knob-color:var(--ymp-interface-color);--paper-slider-active-color:var(--ymp-interface-color);--paper-slider-pin-color:var(--ymp-interface-color);--paper-slider-secondary-color:var(--ymp-text-primary);--paper-slider-disabled-knob-color:var(--ymp-text-primary);--paper-progress-container-color:var(--ymp-background-alfa-color);--paper-slider-container-color:var(--ymp-background-alfa-color);align-items:center;display:flex;max-width:calc(var(--mdc-icon-button-size) + var(--paper-slider-max-width));width:100%}:host .mute{height:var(--mdc-icon-button-size);min-width:var(--mdc-icon-button-size);width:var(--mdc-icon-button-size)}:host .volume{padding:0 calc(15px + var(--calculated-paper-slider-height)/2);width:calc(100% - var(--mdc-icon-button-size))}:host .volume .slider-wrap{left:calc(-15px - var(--calculated-paper-slider-height)/2);position:relative}`;class k extends l{willUpdate(t){if(super.willUpdate(t),t.has("volume")){const t=void 0===this._volumePercent?void 0:Math.floor(this._volumePercent/10)/10;this.volume!==t&&(this._volumePercent=void 0===this.volume?void 0:Math.floor(100*this.volume))}t.has("muted")&&this.muted!==this._muted&&(this._muted=this.muted)}firstUpdated(t){super.firstUpdated(t),this._updateSliderStyles()}render(){const t=this.disabled||void 0===this._muted||void 0===this._volumePercent,e=void 0===this._muted||void 0===this._volumePercent||this._muted;return c`<div class="mute"><ymp-button .icon="${e?"yandex:volume-off":"yandex:volume-on"}" .disabled="${t}" @click="${this._handleMuteChange}"></ymp-button></div><div class="volume"><div class="slider-wrap"><ha-slider .disabled="${t||!0===this._muted}" step="1" min="0" max="100" .value="${this._volumePercent}" .expand="${!1}" @change="${this._handleVolumeChange}"></ha-slider></div></div>`}_handleVolumeChange(t){var e;this._volumePercent=Math.floor(Number(null===(e=t.target)||void 0===e?void 0:e.value)||0);const i=Math.floor(this._volumePercent/10)/10;if(isNaN(i))return;const o={detail:{volume:i},bubbles:!0,composed:!0};this.dispatchEvent(new CustomEvent("volumeChange",o))}_handleMuteChange(){this._muted=!this._muted;const t={detail:{muted:this._muted},bubbles:!0,composed:!0};this.dispatchEvent(new CustomEvent("mutedChange",t))}_updateSliderStyles(){var t,e,i;const o=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("ha-slider"),n=null===(e=null==o?void 0:o.shadowRoot)||void 0===e?void 0:e.querySelector("paper-progress"),r=null===(i=null==n?void 0:n.shadowRoot)||void 0===i?void 0:i.querySelector("#progressContainer");r&&(r.style.borderRadius="2px",r.style.overflow="hidden")}}k.styles=S,k.properties={volume:{attribute:!0,type:Number},muted:{attribute:"muted",reflect:!0,type:Boolean},disabled:{attribute:"disabled",reflect:!0,type:Boolean},_volumePercent:{state:!0,type:Number},_muted:{state:!0,type:Boolean}},window.customElements.define("ymp-volume-controls",k);var M,P,L,I,T,D,E=u`:host{align-items:flex-end;display:flex;justify-content:space-between}:host .buttons-action{--mdc-icon-button-size:32px;--mdc-icon-size:18px;display:none}`;!function(t){t.GET="GET",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE"}(M||(M={})),function(t){t.language="language",t.system="system",t.comma_decimal="comma_decimal",t.decimal_comma="decimal_comma",t.space_comma="space_comma",t.none="none"}(P||(P={})),function(t){t.language="language",t.system="system",t.am_pm="12",t.twenty_four="24"}(L||(L={})),function(t){t.language="language",t.monday="monday",t.tuesday="tuesday",t.wednesday="wednesday",t.thursday="thursday",t.friday="friday",t.saturday="saturday",t.sunday="sunday"}(I||(I={})),function(t){t.CONFIG="config",t.DIAGNOSTIC="diagnostic"}(T||(T={})),function(t){t.PLAYING="playing",t.PAUSED="paused",t.IDLE="idle",t.OFF="off",t.ON="on",t.UNAVAILABLE="unavailable",t.UNKNOWN="unknown",t.STANDBY="standby",t.BUFFERING="buffering"}(D||(D={}));var z={name:"Media Player",description:"Media player for Yandex stations. With additional station management capabilities."},V={color:{label:"Color of some interface elements",helper:"The color of the volume setting and the progress bar. You can customize these colors in your profile.",options:{accent:"Accent Color",primary:"Primary Color"}},devices:{label:"Choose Device",helper:"Devices that the media player will control. The equalizers of these devices will be connected automatically."}},$={no_source:"Select a Yandex station",no_played:"Nothing is being played now",no_name:"The media track has no name",demo_media_artist:"Your favorite artist",demo_media_title:"The name of your most favorite song"},O={like:"I Like",dislike:"I Don't Like",say_track_name:"Say the name of the track or don't"},N={application:z,config:V,media:$,tooltip:O},A={name:"Yandex Медиа Плеер",description:"Медиа проигрыватель для Yandex станций. С дополнительными возможностями управления Yandex станциями."},j={color:{label:"Цвет элементов интерфейса",helper:"Цвет настройки громкости и прогресс бара. Эти цвета настраиваются в профиле пользователя.",options:{accent:"Цвет Акцента",primary:"Основной Цвет"}},devices:{label:"Выберите Устройство",helper:"Устройства, которыми будет управлять плеер. Эквалайзеры этих устройств будут подключены автоматически."}},U={no_source:"Выберите Yandex станцию",no_played:"Сейчас ничего не проигрывается",no_name:"У медиа файла нет названия",demo_media_artist:"Ваш любимый исполнитель",demo_media_title:"Название вашей самой любимой композиции"},R={like:"Мне Нравится",dislike:"Мне Не Нравится",say_track_name:"Произносить или нет названия треков"},q={application:A,config:j,media:U,tooltip:R};const H={en:Object.freeze({__proto__:null,application:z,config:V,media:$,tooltip:O,default:N}),ru:Object.freeze({__proto__:null,application:A,config:j,media:U,tooltip:R,default:q})};function F(t,e){if("string"==typeof e)return e;const i=t.split("."),[o,...n]=i,r=e[o];return r&&"string"!=typeof r?F(n&&n.length>0?n.join("."):"",r):r}function Z(t,e="",i=""){const o=function(){var t;let e=null===(t=localStorage.getItem("selectedLanguage"))||void 0===t?void 0:t.replace(/['"]+/g,"").replace("-","_");return e&&"null"!==e||(e=localStorage.getItem("i18nextLng")),e&&"null"!==e||(e="en"),e}();let n;try{n=Object.assign({},H[o])}catch(t){n=Object.assign({},H.en)}let r=F(t,n);return void 0===r&&(r=F(t,Object.assign({},H.en))),r&&""!==e&&""!==i&&(r=r.replace(`{${e}}`,i)),null!=r?r:""}class B extends l{constructor(){super(...arguments),this._sayTrack=!1}willUpdate(t){super.willUpdate(t),t.has("state")&&(this._lock&&this._innerState===this.state&&(this._lock=!1),this.state!==this._innerState&&(this._innerState=this.state))}render(){return c`<div class="buttons-remote"><ymp-button icon="yandex:skip-prev" @click="${this._handlePrev}"></ymp-button>${this._innerState===D.PAUSED?c`<ymp-button icon="yandex:play" style="--mdc-icon-size:34px" @click="${this._handlePlay}"></ymp-button>`:c`<ymp-button icon="yandex:pause" style="--mdc-icon-size:34px" @click="${this._handlePaused}"></ymp-button>`}<ymp-button icon="yandex:skip-next" @click="${this._handleNext}"></ymp-button></div><div class="buttons-action"><ymp-button icon="yandex:heart" .label="${Z("tooltip.like")}" @click="${this._handleLike}"></ymp-button><ymp-button icon="yandex:heart-outline" .label="${Z("tooltip.dislike")}" @click="${this._handleDisLike}"></ymp-button><ymp-button icon="yandex:dj-mode-on" .label="${Z("tooltip.say_track_name")}" @click="${this._toggleSayTrack}"></ymp-button></div>`}_handlePlay(){if(this._lock)return;this._lock=!0,this._innerState=D.PLAYING;this.dispatchEvent(new CustomEvent("paused",{detail:{paused:!1},bubbles:!0,composed:!0}))}_handlePaused(){if(this._lock)return;this._lock=!0,this._innerState=D.PAUSED;this.dispatchEvent(new CustomEvent("paused",{detail:{paused:!0},bubbles:!0,composed:!0}))}_handleNext(){this.dispatchEvent(new CustomEvent("next",{detail:{},bubbles:!0,composed:!0}))}_handlePrev(){this.dispatchEvent(new CustomEvent("prev",{detail:{},bubbles:!0,composed:!0}))}_handleLike(){this.dispatchEvent(new CustomEvent("command",{detail:{media_content_type:"command",media_content_id:"лайк"},bubbles:!0,composed:!0}))}_handleDisLike(){this.dispatchEvent(new CustomEvent("command",{detail:{media_content_type:"command",media_content_id:"снять лайк"},bubbles:!0,composed:!0}))}_toggleSayTrack(){this._sayTrack=!this._sayTrack;const t={detail:{media_content_type:"settings",media_content_id:"анонсировать треки: "+(this._sayTrack?"да":"нет")},bubbles:!0,composed:!0};this.dispatchEvent(new CustomEvent("command",t))}}B.styles=E,B.properties={state:{attribute:!0,type:String},duration:{attribute:!0,type:String},_innerState:{state:!0,type:String},_lock:{state:!0,type:Boolean},_sayTrack:{state:!0,type:Boolean}},window.customElements.define("ymp-media-controls",B);var Y=u`:host{--disabled-text-color:var(--ymp-text-primary);color:var(--ymp-text-primary)}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@-moz-keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}`;const G=["mdi","hass","hassio","hademo"],W="hass-icon-db",X="mdi-icon-store";async function Q(t){const[e,i]=t.split(":",2);if(!e||!i)throw new Error("Invalid icon name");return G.includes(e)?async function(t,e){const i=(await indexedDB.databases()).find((t=>t.name===W)),o=(await new Promise(((t,e)=>{if(!i||!i.name)return e(new Error(`Database ${W} not found`));const o=indexedDB.open(i.name,i.version);o.onerror=()=>e(new Error(`Error to open DB. Code: ${o.errorCode}`)),o.onsuccess=e=>t(e.target.result)}))).transaction(X,"readonly").objectStore(X);return new Promise(((i,n)=>{const r=o.get(e);r.onerror=()=>n(new Error(`Request error. Code: ${r.errorCode}`)),r.onsuccess=o=>{var r;return(null===(r=o.target)||void 0===r?void 0:r.result)?i(o.target.result):n(`Icon ${t}:${e} not found`)}}))}(e,i):async function(t,e){var i;const o=null===(i=window.customIcons)||void 0===i?void 0:i[t];if(!o||"function"!=typeof o.getIcon)throw new Error(`Icon ${t}:${e} not found`);const n=await o.getIcon(e);if(!(null==n?void 0:n.path))throw new Error(`Icon ${t}:${e} not found`);return n.path}(e,i)}class J extends l{constructor(){super(...arguments),this.disabled=!1,this.loading=!1}willUpdate(t){super.willUpdate(t),t.has("icon")&&(this._path=void 0,this._loadIcon())}firstUpdated(t){window.loadCardHelpers().then((t=>this._helpers=t))}render(){return this._path?this.loading?c`<ha-icon-button .path="${"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"}" .style="${"animation: 800ms linear 10ms infinite normal none running rotate;"}" .disabled="${!0}"></ha-icon-button>`:c`<ha-icon-button .path="${this._path}" .label="${this.label}" .disabled="${this.disabled}"></ha-icon-button>`:c``}_loadIcon(){this.icon&&Q(this.icon).then((t=>{this._path=t})).catch((t=>{console.error(t),this._path="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}))}}J.properties={icon:{attribute:!0,type:String},label:{attribute:!0,type:String},disabled:{attribute:!0,type:Boolean},loading:{attribute:!0,type:Boolean},_helpers:{state:!0},_path:{state:!0,type:String}},J.styles=Y,window.customElements.define("ymp-button",J);var K=u`:host{--mdc-icon-button-size:52px;--mdc-icon-size:36px;--divider-color:#00000000;background:transparent;border:none;color:var(--ymp-text-primary);display:block;margin-right:14px;padding:0;position:relative;text-align:center}`;class tt extends l{willUpdate(t){var e,i;if(super.willUpdate(t),this.hass){if(t.has("hass")||t.has("entityId")){const t=this.entityId?null===(i=null===(e=this.hass.states[this.entityId])||void 0===e?void 0:e.attributes)||void 0===i?void 0:i.icon:void 0;t&&t!==this._icon?this._icon=t:t||(this._icon="yandex:alisa")}(t.has("_icon")||t.has("entityId"))&&window.loadCardHelpers().then((t=>{this._iconElement=t.createHuiElement({type:"icon",entity:this.entityId,icon:this._icon,hold_action:void 0,double_tap_action:void 0,tap_action:this.entityId?{action:"more-info"}:{action:"none"},style:{}}),this._iconElement&&(this._iconElement.hass=this.hass)}))}}shouldUpdate(t){return!(this.hass&&this.entityId&&this._icon&&this._iconElement)||(t.has("entityId")||t.has("_iconElement")||t.has("_icon"))}render(){return this._iconElement?c`${this._iconElement}`:c``}}tt.properties={hass:{attribute:!0},entityId:{attribute:!0,type:String},_icon:{state:!0,type:String},_iconElement:{state:!0}},tt.styles=K,window.customElements.define("ymp-station-logo",tt);var et=u`:host{color:var(--ymp-text-primary);font-size:18px;font-weight:400;letter-spacing:-.012em;line-height:22px;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}`;class it extends l{willUpdate(t){var e;if(super.willUpdate(t),this.hass){if(t.has("entityId")){const t=this.entityId&&this.hass.entities[this.entityId]||void 0;this._deviceId!==(null==t?void 0:t.device_id)&&(this._deviceId=null==t?void 0:t.device_id),this._entityName!==(null==t?void 0:t.name)&&(this._entityName=null==t?void 0:t.name)}if(t.has("_deviceId")){const t=this._deviceId&&(null===(e=this.hass.devices[this._deviceId])||void 0===e?void 0:e.name)||void 0;this._deviceName!==t&&(this._deviceName=t)}}}shouldUpdate(t){return!(this.hass&&this._deviceId&&this.entityId&&this._deviceName)||(t.has("_deviceName")||t.has("_entityName"))}render(){return c`${this._entityName||this._deviceName||"Yandex Station"}`}}it.properties={hass:{attribute:!0},entityId:{attribute:!0,type:String},_deviceId:{state:!0,type:String},_entityName:{state:!0,type:String},_deviceName:{state:!0,type:String}},it.styles=et,window.customElements.define("ymp-device-name",it);var ot=u`:host{--ymp-inned-shadow:linear-gradient(90deg,transparent 0%,#000 5%,#000 95%,transparent);color:var(--ymp-text-primary);display:block;font-size:13px;font-weight:400;line-height:14px;opacity:.8;overflow:hidden;position:relative;text-overflow:ellipsis;white-space:nowrap}:host .container{animation-duration:0s}:host .hold-line{visibility:visible}:host .move-line-wrap{animation-duration:inherit;bottom:0;left:0;-webkit-mask-image:var(--ymp-inned-shadow);position:absolute;right:0;top:0;visibility:hidden}:host .move-line-wrap .move-line{animation:slide 0s linear 0s infinite normal none running;animation-duration:inherit;min-width:fit-content;white-space:nowrap;width:fit-content}:host .move-on .hold-line{visibility:hidden}:host .move-on .move-line-wrap{visibility:visible}@keyframes slide{0%{transform:translateX(0)}to{transform:translateX(-100%)}}@-moz-keyframes slide{0%{transform:translateX(0)}to{transform:translateX(-100%)}}`;class nt extends l{willUpdate(t){if(super.willUpdate(t),t.has("entityState")&&this.entityState){const t=this._computeMediaTitle(),e=this._computeMediaDescription();this._mediaTitle!==t&&(this._mediaTitle=t),this._mediaDescription!==e&&(this._mediaDescription=e)}(t.has("_mediaTitle")||t.has("_mediaDescription"))&&(this._fullTitle=(this._mediaTitle+(this._mediaDescription?` - ${this._mediaDescription}`:"")).trim())}shouldUpdate(t){if(!this.entityState||!this._mediaTitle||!this._mediaDescription)return!0;if(t.has("_overflow"))return!0;if(t.has("entityState")){const e=t.get("entityState"),i=this._computeMediaTitle(e),o=this._computeMediaDescription(e);return i!==this._mediaTitle||o!==this._mediaDescription}return t.has("_overflow")||t.has("_fullTitle")||t.has("_mediaTitle")||t.has("_mediaDescription")}updated(t){t.has("_fullTitle")&&setTimeout((()=>this._computeOverflow()),10)}render(){var t;const e="container "+(this._overflow?"move-on":""),i=`animation-duration: ${null!==(t=this._overflow)&&void 0!==t?t:0}s;`;let o;return o=this.entityState?this.entityState.state!==D.PLAYING&&this.entityState.state!==D.PAUSED?Z("media.no_played"):this._fullTitle||Z("media.no_name"):Z("media.no_source"),c`<div class="${e}" style="${i}"><span class="hold-line">${o}</span><div class="move-line-wrap"><div class="move-line"><span>${o}</span></div></div></div>`}_computeMediaTitle(t){var e;const i=null===(e=t||this.entityState)||void 0===e?void 0:e.attributes.media_title;if(!i)return"";const o=i.indexOf("?authSig=");let n=o>0?i.slice(0,o):i;return n.startsWith("http")&&(n=decodeURIComponent(n.split("/").pop())),n.trim()}_computeMediaDescription(t){var e,i,o,n,r,a,s;const l=null===(e=t||this.entityState)||void 0===e?void 0:e.attributes;if(!l)return"";let c;switch(l.media_content_type){case"music":case"image":c=null!==(i=l.media_artist)&&void 0!==i?i:"";break;case"playlist":c=null!==(o=l.media_playlist)&&void 0!==o?o:"";break;case"tvshow":c=null!==(n=l.media_series_title)&&void 0!==n?n:"",l.media_season&&(c+=` S${l.media_season}`,l.media_episode&&(c+=`E${l.media_episode}`));break;case"channel":c=null!==(r=l.media_channel)&&void 0!==r?r:"";break;default:c=null!==(a=l.app_name)&&void 0!==a?a:""}return null!==(s=c.trim())&&void 0!==s?s:""}_computeOverflow(){var t;const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".move-line");if(e&&e.parentNode){const t=e.clientWidth>e.parentNode.clientWidth;this._overflow=t?7.5+e.clientWidth/50:void 0}else this._overflow=void 0}}nt.properties={entityState:{attribute:!0},_mediaTitle:{state:!0,type:String},_mediaDescription:{state:!0,type:String},_fullTitle:{state:!0,type:String},_overflow:{state:!0,type:Number}},nt.styles=ot,window.customElements.define("ymp-media-title",nt);var rt=u`:host{--mdc-icon-button-size:40px;--mdc-icon-size:28px;--primary-text-color:var(--ymp-text-primary,--primary-text-color);-webkit-font-smoothing:var(--paper-font-body1_-_-webkit-font-smoothing);color:var(--primary-text-color);font-family:var(--paper-font-body1_-_font-family);font-size:var(--paper-font-body1_-_font-size);font-weight:var(--paper-font-body1_-_font-weight);line-height:var(--paper-font-body1_-_line-height)}.media-player-card{overflow:hidden;position:relative}.media-player-card ymp-background{bottom:0;left:0;position:absolute;right:0;top:0;z-index:1}.media-player-card .content{margin-right:auto;max-width:280px;padding:16px 16px 0;position:relative;z-index:2}.media-player-card .content .media-info{align-items:center;display:flex;justify-content:flex-start}.media-player-card .content .media-info .device-and-track{max-width:calc(100% - 50px)}.media-player-card .content .media-info .device-and-track :last-child{margin-top:6px}.media-player-card .content ymp-volume-controls{margin-top:18px;width:100%}.media-player-card .content ymp-media-controls{margin-top:12px}`;const at={attributes:{volume_level:.2,is_volume_muted:!1,media_content_type:"music",media_duration:100,media_position:10,media_title:Z("media.demo_media_artist"),media_artist:Z("media.demo_media_title"),alice_state:"IDLE",device_class:"tv",friendly_name:"Yandex Station"},entity_id:"media_player.yandex_station",last_changed:"1970-01-01T00:00:00",last_updated:"1970-01-01T00:00:00",state:D.PAUSED,context:{id:"0",parent_id:null,user_id:"0"}};class st extends l{static async getConfigElement(){return await import("./media-player-config-28acd7c6.js"),document.createElement("media-player-config")}static getStubConfig(){return{color:"accent",devices:[]}}setConfig(t){this._config=t}getCardSize(){return 3}willUpdate(t){var e,i,o;if(super.willUpdate(t),this._config&&this.hass&&(t.has("_config")&&(this._devices=((t,e=[])=>e.map((e=>{const i=t.devices[e];let o,n;for(const e in t.entities)if(t.entities[e].device_id===i.id&&(e.startsWith("media_player")?o=e:e.includes("equalizer")&&(n=e)),o&&n)break;return o?{id:i.id,name:i.name_by_user||i.name||"No name",model:i.model,playerEntityId:o,equalizerEntityId:n}:null})).filter(Boolean))(this.hass,this._config.devices)),t.has("_devices")&&(this._devices&&this._devices.length?this._deviceId&&this._devices.some((({id:t})=>t===this._deviceId))||(this._deviceId=this._devices[0].id):this._deviceId=void 0),t.has("_deviceId")&&(this._deviceId&&this._devices?this._entityId=null===(e=this._devices.find((t=>t.id===this._deviceId)))||void 0===e?void 0:e.playerEntityId:this._entityId=void 0),t.has("hass"))){const t=(null===(i=this._entityState)||void 0===i?void 0:i.attributes.entity_picture_local)||(null===(o=this._entityState)||void 0===o?void 0:o.attributes.entity_picture);this._mediaImage!==t&&(this._mediaImage=t)}}render(){var t,e,i,o,n,r,a,s;if(!this._config||!this.hass)return c``;const l=!this._entityState||this._state!==D.PLAYING&&this._state!==D.PAUSED||void 0===(null===(t=this._entityState)||void 0===t?void 0:t.attributes.media_duration);return c`<ha-card class="media-player-card"><ymp-background .image="${this._mediaImage?this.hass.hassUrl(this._mediaImage):void 0}" .editMode="${this.editMode}" .color="${this._config.color}"></ymp-background><div class="content"><div class="media-info"><ymp-station-logo .entityId="${this._entityId}" .hass="${this.hass}"></ymp-station-logo><div class="device-and-track"><ymp-device-name .entityId="${this._entityId}" .hass="${this.hass}"></ymp-device-name><ymp-media-title .entityState="${this._entityState}"></ymp-media-title></div></div><ymp-volume-controls .volume="${null===(e=this._entityState)||void 0===e?void 0:e.attributes.volume_level}" .muted="${null===(i=this._entityState)||void 0===i?void 0:i.attributes.is_volume_muted}" @volumeChange="${({detail:t})=>this._serviceCall("volume_set",{volume_level:t.volume})}" @mutedChange="${({detail:t})=>this._serviceCall("volume_mute",{is_volume_muted:t.muted})}"></ymp-volume-controls><ymp-media-controls .state="${this._state}" .duration="${null===(o=this._entityState)||void 0===o?void 0:o.attributes.media_duration}" @paused="${({detail:t})=>this._serviceCall(t.paused?"media_pause":"media_play")}" @next="${()=>this._serviceCall("media_next_track")}" @prev="${()=>this._serviceCall("media_previous_track")}" @command="${({detail:t})=>this._serviceCall("play_media",t)}"></ymp-media-controls></div><ymp-progress .disabled="${l}" .duration="${null!==(r=null===(n=this._entityState)||void 0===n?void 0:n.attributes.media_duration)&&void 0!==r?r:100}" .position="${null!==(s=null===(a=this._entityState)||void 0===a?void 0:a.attributes.media_position)&&void 0!==s?s:0}" @seek="${({detail:t})=>this._serviceCall("media_seek",{seek_position:t.seek})}}"></ymp-progress></ha-card>`}async _serviceCall(t,e={}){return this._entityId?this.hass.callService("media_player",t,e,{entity_id:this._entityId}).catch((t=>{throw console.error(t),t})):console.warn("No selected device")}get _entityState(){return void 0!==this.editMode||this._entityId&&this.hass?this.hass&&this._entityId?this.hass.states[this._entityId]:void 0:at}get _state(){var t,e;return null!==(e=null===(t=this._entityState)||void 0===t?void 0:t.state)&&void 0!==e?e:D.UNAVAILABLE}}st.styles=rt,st.properties={hass:{attribute:!1},editMode:{attribute:!1},_config:{state:!0},_devices:{state:!0},_deviceId:{state:!0,type:String},_entityId:{state:!0,type:String},_mediaImage:{state:!0,type:String}},window.customElements.define("yandex-media-player",st),window.customCards=window.customCards||[],window.customCards.push({type:"yandex-media-player",name:Z("application.name"),preview:!0,description:Z("application.description")});export{l as L,st as M,b as Y,s as a,C as b,u as c,k as d,B as e,J as f,a as g,c as h,tt as i,it as j,nt as k,n as s,Z as t};
